<html>
  <ul id="message-list" />
  <textarea id="message-body"></textarea>
  <button onclick="sendMessage()">Send</button>
  <script>
    var conn = new WebSocket('ws://localhost:3000/api/v1/chat')
    const messageList = document.getElementById('message-list')
    const messageBody = document.getElementById('message-body')

    conn.addEventListener("message", (m) => {
      console.log(m);

      data = JSON.parse(m.data)

      let li = document.createElement('li')
      let text = document.createTextNode(data.body)

      li.append(text)

      messageList.appendChild(li)
    })

    function sendMessage() {
      conn.send(messageBody.value)
      messageBody.value = ""
    }
  </script>
</html>